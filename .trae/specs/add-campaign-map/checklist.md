* [x] 首页存在「自由训练 / 闯关地图」切换开关，且默认仍为自由训练

* [x] 自由训练原有四模式配置与开始训练流程无回归

* [x] 闯关地图 UI 具备：章节头部、曲线路径、节点状态与星级、故事弹窗、关卡详情弹窗

* [x] 闯关地图包含至少 5 个 episode，且每个 episode 至少 5 关（可稳定复现）

* [x] 每个闯关关卡都映射到现有四游戏之一，并能启动对应训练

* [x] 游客进度写入 localStorage，刷新后不丢失

* [x] 登录用户进度写入数据库并可通过 API 恢复

* [x] 数据库已新增闯关相关表/索引/约束，迁移可执行且不破坏现有表

* [x] 结算与闯关进度写入融合满足幂等性（重复提交不会把星级写差）

* [x] 项目已推送到 BrainTrainingSystem 的 v4-dev 分支

